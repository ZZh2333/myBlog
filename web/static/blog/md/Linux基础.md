# 一、FHS文件系统层次标准

|目录|目录用途|
|----|----|
|/bin|常见的用户指令|
|/boot|内核和启动文件|
|/dev|设备文件|
|/etc|系统和服务的配置文件|
|/home|系统默认的普通用户的家目录|
|/lib|系统函数库目录|
|/lost+found|ext3文件系统需要的目录，用于磁盘检查|
|/mnt|系统加载文件系统时常用的挂载点|
|/opt|第三方软件安装目录|
|/proc|虚拟文件系统|
|/root|root用户的家目录|
|/sbin|存放系统管理命令|
|/tmp|临时文件的存放目录|
|/usr|存放与用户直接相关的文件和目录|
|/media|系统用来挂载光驱等临时文件系统的挂载点|

# 二、查找文件

## 2.1、find命令

**find常见参数**
|参数|含义|
|---|---|
|-name FILENAME|查找文件名为FILENAME的文件|
|-perm|根据文件权限查找|
|-user USERNAME|根据用户名查找|
|-mtime -n/+n|查找n天内/n天前更改过的文件|
|-atime -n/+n|查找n天内/n天前访问过的文件|
|-ctime -n/+n|查找n天内/n天前创建的文件|
|-newer FILENAME|查找更改时间比FILENAME新的文件|
|-type b/d/c/p/l/f/s|查找块/目录/字符/管道/链接/普通/套接字文件|
|-size|根据文件大小查找|
|-depth|最大查找目录深度|

```shell
#find PATH -name FILENAME
find / -name *.log
```

![20230816094810](https://raw.githubusercontent.com/ZZh2333/picgoResource/main/img/20230816094810.png)

## 2.2、which命令

which用于从系统的PATH变量所定义的目录中查找可执行文件的绝对路径。

```shell
which passwd
```

![20230816101802](https://raw.githubusercontent.com/ZZh2333/picgoResource/main/img/20230816101802.png)

## 2.3、whereis命令

使用whereis也能查到其路径，但是和which不同的是它不但能找出其二进制文件，还能找出相关的man文件。

```shell
whereis passwd
```

![20230816101957](https://raw.githubusercontent.com/ZZh2333/picgoResource/main/img/20230816101957.png)

# 三、网络故障排查

> 1. 确认网卡本身是否能够正常工作，127.0.0.1被称为主机的回环接口，是TCP/IP协议栈正常工作的前提。如果ping不通，一般可以证实为本机TCP/IP协议栈有问题。
>
> ```shell
> ping 127.0.0.1
> ```
>
> 2. 确认网卡是否出现了物理或驱动故障，使用ping本机IP的方式，如果能ping通则说明本地设备和驱动都正常。
> 3. 确认能否ping通同网段的其他主机。这一步主要确认二层网络设备（交换机、HUB等）工作是否正常。如果ping不通说明二层网络出现问题，可能涉及交换机的端口工作模式、vlan划分等因素。
> 4. 确认能否ping通网关IP，如果数据包能正常到达网关，则说明主机和本地网络都工作正常。
> 5. 确认能否ping通公网IP，如果可以则说明本地路由设置正确，否则需要确认路由设备的nat或路由设置是否正确。
> 6. 确认是否能够ping通公网上的某个域名，如果可以则说明DNS部分设置正确。

# 四、top命令详解

![20230816135200](https://raw.githubusercontent.com/ZZh2333/picgoResource/main/img/20230816135200.png)

> 1. 第一行为服务器基础信息，包括top命令的刷新时间为13:51:55，系统已经运行5天21分钟，当前有一个用户登录，系统的负载（load average）为：最近1分钟内的平均系统负载为0.05，最近5分钟内的平均系统负载为0.01，最近15分钟内的平均系统负载为0.05。
> 2. 第二行是当前系统进程概况，一共有83个进程，其中1个正在运行，82个处于休眠状态，没有停止的进程，没有讲时进程。
> 3. 第三行是CPU信息，us代表用户空间占用的CPU百分比，sy代表内核空间占用的CPU百分比，ni代表改变过优先级的进程占用的CPU百分比，id代表空闲CPU百分比，wa代表I/O等待百分比，hi代表硬中断占用的CPU百分比，si代表软中断占用的CPU百分比。对于多核CPU，可以在top显示界面中按数字键1查看每个逻辑CPU的使用情况。
> 4. 第四行是物理内存的使用情况，从左到右分别表示物理内存总量、已使用内存、空闲内存、缓存使用的内存。
> 5. 第五行是虚拟内存的使用状态，前三个与物理内存相同，最后一个代表缓冲区的交换区总量。

进程信息区中的信息默认显示11个字段，按f可以自行勾选想要显示的字段。  
默认情况top现实的进程是按照CPU使用率来进行排序的，按大写字母O可以进入排序选择页。

|字段|含义|
|---|---|
|PID|进程id|
|USER|进程所有者|
|PR|进程优先级|
|NI|nice值，负值表示高优先级，正值表示低优先级|
|VIRT|进程使用的虚拟内存总量，单位为Kb，VIRT=SWAP+RES|
|RES|进程使用的未被换出的物理内存大小，单位为Kb，RES=CODE+DATA|
|SHR|共享内存大小，单位为Kb|
|%CPU|上次更新到现在的CPU时间占用百分比|
|%MEM|进程使用的物理内存百分比|
|TIME+|进程使用的CPU时间总计，单位为1/100秒|
|COMMAND|进程名称（命令名/命令行）|

# 五、进程的终止

kill语法

```shell
#kill [信号代码] 进程ID
kill -9 2877
```

kill后可以跟的信号代码一共有64中，使用kill -l可以查看。  
常用信号代码为HUP(1)、KILL(9)、TERM(15)。分别代表重启、强行杀掉、正常结束。  
不加信号代码的命令默认为TERM(15)，即缓和关闭。

![20230816143343](https://raw.githubusercontent.com/ZZh2333/picgoResource/main/img/20230816143343.png)

由于使用kill命令时要先查询到进程PID，如果杀错PID后果**不堪设想**。事实上更多的使用killall命令，它可以直接使用进程的名字而非PID。killall命令更加**简单、安全**。例如停止系统中所有的httpd进程。

```shell
killall httpd
```